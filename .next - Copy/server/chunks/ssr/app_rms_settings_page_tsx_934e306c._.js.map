{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/offic/OneDrive/Documents/PROJECTS%20LIVE%20NOW/your-portal/app/rms/settings/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Container,\r\n  FormControlLabel,\r\n  TextField,\r\n  Typography,\r\n  Alert,\r\n  Paper,\r\n} from '@mui/material';\r\n\r\nexport default function SettingsPage(): JSX.Element {\r\n  const [formData, setFormData] = useState({\r\n    apiEndpoint: '',\r\n    apiKey: '',\r\n    username: '',\r\n    password: '',\r\n    autoDelete: false,\r\n    railtelDataSync: false,\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchSettings = async () => {\r\n      try {\r\n        const res = await fetch('/api/rms/setting');\r\n        const data = await res.json();\r\n        setFormData(prev => ({ ...prev, ...data }));\r\n      } catch (err) {\r\n        console.error('Error loading settings', err);\r\n      }\r\n    };\r\n    fetchSettings();\r\n  }, []);\r\n\r\n  const handleChange = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n    try {\r\n      const res = await fetch('/api/rms/setting', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData),\r\n      });\r\n      const result = await res.json();\r\n      setMessage(result.message || 'Settings updated.');\r\n    } catch (err) {\r\n      console.error('Save error', err);\r\n      setMessage('Error updating settings.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\" sx={{ mt: 6 }}>\r\n      <Paper elevation={3} sx={{ p: 4 }}>\r\n        <Typography variant=\"h5\" fontWeight=\"bold\" gutterBottom>\r\n          Portal Settings\r\n        </Typography>\r\n        <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n          Configure system-level parameters for the Railway Management Portal.\r\n        </Typography>\r\n\r\n        <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 3, display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n          <TextField\r\n            label=\"API Endpoint\"\r\n            name=\"apiEndpoint\"\r\n            value={formData.apiEndpoint}\r\n            onChange={handleChange}\r\n            fullWidth\r\n            required\r\n          />\r\n\r\n          <TextField\r\n            label=\"API Key\"\r\n            name=\"apiKey\"\r\n            value={formData.apiKey}\r\n            onChange={handleChange}\r\n            fullWidth\r\n            required\r\n          />\r\n\r\n          <TextField\r\n            label=\"Username\"\r\n            name=\"username\"\r\n            value={formData.username}\r\n            onChange={handleChange}\r\n            fullWidth\r\n          />\r\n\r\n          <TextField\r\n            label=\"Password\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            fullWidth\r\n          />\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                name=\"autoDelete\"\r\n                checked={formData.autoDelete}\r\n                onChange={handleChange}\r\n              />\r\n            }\r\n            label=\"Enable Auto Delete\"\r\n          />\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                name=\"railtelDataSync\"\r\n                checked={formData.railtelDataSync}\r\n                onChange={handleChange}\r\n              />\r\n            }\r\n            label=\"Enable Railtel Data Sync\"\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? <CircularProgress size={24} color=\"inherit\" /> : 'Save Settings'}\r\n          </Button>\r\n\r\n          {message && (\r\n            <Alert severity={message.includes('Error') ? 'error' : 'success'}>\r\n              {message}\r\n            </Alert>\r\n          )}\r\n        </Box>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}